<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Valore Ora Pro</title>
    
    <meta name="theme-color" content="#0f172a">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <link rel="apple-touch-icon" href="https://cdn-icons-png.flaticon.com/512/2611/2611139.png">
    <link rel="manifest" href="data:application/manifest+json,{%22name%22:%22Analizzatore%20Lavoro%22,%22short_name%22:%22ValoreOra%22,%22start_url%22:%22.%22,%22display%22:%22standalone%22,%22background_color%22:%22%23ffffff%22,%22theme_color%22:%22%230f172a%22}">

    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap');
        body { font-family: 'Inter', sans-serif; -webkit-tap-highlight-color: transparent; }
        input::-webkit-outer-spin-button, input::-webkit-inner-spin-button { -webkit-appearance: none; margin: 0; }

        /* STILI PER IL PDF (RIPRODUZIONE IMMAGINE) */
        @media print {
            .no-print { display: none !important; }
            .print-only { display: block !important; }
            body { background: white !important; padding: 0 !important; }
            
            .pdf-container { max-width: 100% !important; padding: 20px !important; }
            
            .pdf-header {
                border: 1px solid #e2e8f0 !important;
                border-radius: 1.5rem !important;
                padding: 1.5rem !important;
                margin-bottom: 2rem !important;
            }

            .pdf-main-card {
                border: 2px solid black !important;
                border-radius: 1.5rem !important;
                padding: 3rem 1.5rem !important;
                text-align: center !important;
                margin-bottom: 2rem !important;
            }

            .pdf-details-card {
                border: 2px solid black !important;
                border-radius: 1.5rem !important;
                padding: 2rem !important;
                margin-bottom: 2rem !important;
            }

            .pdf-footer {
                border: 1px solid #f1f5f9 !important;
                border-radius: 2rem !important;
                padding: 1.5rem !important;
                display: grid !important;
                grid-template-columns: 1fr 1px 1fr !important;
                align-items: center !important;
            }
            
            .divider-black { border-bottom: 2px solid black !important; margin-bottom: 10px; padding-bottom: 5px; }
            .v-line { background: black !important; width: 2px !important; height: 50px !important; margin: 0 auto; }
        }
        .print-only { display: none; }
    </style>
</head>
<body class="bg-slate-100 min-h-screen text-slate-800 pb-10">

    <div class="max-w-xl mx-auto p-4 space-y-4 pdf-container">
        
        <header class="bg-white p-6 rounded-[2.5rem] shadow-sm border border-slate-200 flex justify-between items-center no-print">
            <div class="flex items-center gap-3">
                <div class="w-10 h-10 bg-slate-900 rounded-2xl flex items-center justify-center shadow-lg text-white font-black">‚Ç¨</div>
                <h1 class="text-lg font-black tracking-tighter">VALORE ORA</h1>
            </div>
            <div class="flex items-center gap-1 bg-blue-50 px-3 py-2 rounded-2xl border border-blue-100">
                <input type="number" id="baseBenchmark" value="20.84" step="0.01" class="w-16 font-black text-blue-600 bg-transparent text-right outline-none" oninput="calculate()">
                <span class="text-[9px] font-black text-blue-400">TARGET</span>
            </div>
        </header>

        <div class="print-only pdf-header">
            <h2 class="font-black text-xl uppercase italic">Report Valore Ora</h2>
            <p class="text-[10px] font-bold text-slate-400">VERSIONE 5.3 PRO</p>
        </div>

        <div class="bg-white p-4 rounded-3xl shadow-sm border border-slate-200 no-print">
            <input type="text" id="nomeAzienda" placeholder="Nome Azienda / Posizione..." class="w-full bg-transparent font-bold text-slate-600 outline-none px-2 italic uppercase text-sm">
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 no-print">
            <div class="bg-white p-6 rounded-[2.5rem] shadow-sm border border-slate-200 space-y-4">
                <h3 class="text-[10px] font-black uppercase text-emerald-500 italic">Bilancio Economico</h3>
                <input type="number" id="stipendio" value="18250" class="w-full p-4 bg-slate-50 border-none rounded-2xl font-black text-lg text-emerald-700 shadow-inner outline-none" oninput="calculate()">
                <input type="number" id="buoniPasto" value="0" step="0.5" class="w-full p-4 bg-emerald-50 border-none rounded-2xl font-bold shadow-inner outline-none text-emerald-700" placeholder="Buoni Pasto ‚Ç¨/gg" oninput="calculate()">
                <input type="number" id="speseMese" value="100" class="w-full p-4 bg-rose-50 border-none rounded-2xl font-bold text-rose-600 shadow-inner outline-none" placeholder="Spese ‚Ç¨/mese" oninput="calculate()">
            </div>
            <div class="bg-white p-6 rounded-[2.5rem] shadow-sm border border-slate-200 space-y-4">
                <h3 class="text-[10px] font-black uppercase text-blue-500 italic">Parametri Tempo</h3>
                <input type="number" id="oreInput" value="17.25" step="0.01" class="w-full p-4 bg-slate-50 border-none rounded-2xl font-black shadow-inner outline-none" oninput="calculate()">
                <select id="settimane" class="w-full p-4 bg-slate-50 rounded-2xl text-[10px] font-black outline-none border border-slate-100" onchange="calculate()">
                    <option value="43">Scuola (43 sett.)</option>
                    <option value="48">Standard (48 sett.)</option>
                </select>
                <input type="number" id="viaggio" value="24" class="w-full p-4 bg-slate-50 border-none rounded-2xl font-bold shadow-inner outline-none" placeholder="Viaggio Min/gg" oninput="calculate()">
            </div>
        </div>

        <div id="resultCard" class="p-10 rounded-[3rem] shadow-2xl text-white text-center transition-all relative overflow-hidden pdf-main-card">
            <p id="labelValore" class="text-[10px] font-bold uppercase tracking-widest mb-2 opacity-70">Valore Orario Reale</p>
            <div id="valoreOrario" class="text-7xl font-[900] mb-4 tracking-tighter italic">0,00 ‚Ç¨</div>
            <div id="feedback" class="inline-block px-6 py-2 rounded-full bg-white/20 text-[10px] font-black uppercase tracking-widest shadow-sm">Analisi...</div>
        </div>

        <div class="print-only pdf-details-card">
            <h3 class="font-[900] italic uppercase text-xl divider-black">Analisi Professionale del Tempo</h3>
            <div class="grid grid-cols-2 gap-y-4 text-sm mt-4">
                <div><span class="text-slate-400 font-bold">Stipendio Netto:</span> <b id="pdf-netto"></b></div>
                <div><span class="text-slate-400 font-bold">Buoni Pasto:</span> <b id="pdf-bp"></b></div>
                <div><span class="text-slate-400 font-bold">Spese Annuali:</span> <b id="pdf-spese"></b></div>
                <div><span class="text-slate-400 font-bold">Benchmark:</span> <b id="pdf-bench"></b></div>
            </div>
            <hr class="my-6 border-slate-100">
            <div class="text-[13px] font-bold">
                <span class="text-slate-400 uppercase mr-2">Carico Temporale:</span> 
                <span id="pdf-carico" class="text-slate-900"></span>
            </div>
        </div>

        <div class="bg-white rounded-[2.5rem] p-8 border border-slate-200 shadow-sm grid grid-cols-[1fr_auto_1fr] items-center pdf-footer">
            <div class="pr-4">
                <p class="text-[9px] font-[900] text-slate-400 uppercase mb-1">Reddito Reale (Netto - Spese)</p>
                <div id="redditoPulito" class="text-3xl font-[900] text-slate-300 italic">0 ‚Ç¨</div>
                <p id="bpDetail" class="text-[9px] font-bold text-slate-400 uppercase mt-1">+0‚Ç¨ BUONI PASTO</p>
            </div>
            <div class="v-line bg-slate-100 w-[1px] h-12"></div>
            <div class="text-right pl-4">
                <p class="text-[9px] font-[900] text-slate-400 uppercase mb-1">Vita Sequestrata</p>
                <div id="oreTotali" class="text-3xl font-[900] text-slate-800 italic">0 h</div>
                <p id="infoSett" class="text-[9px] font-bold text-slate-400 uppercase mt-1">0 ORE/SETTIMANA</p>
            </div>
        </div>

        <button onclick="window.print()" class="w-full bg-black text-white font-black py-5 rounded-[2.5rem] shadow-xl active:scale-95 transition-all text-xs uppercase tracking-widest no-print">
            üíæ Esporta Report Professionale PDF
        </button>

    </div>

    <script>
        function calculate() {
            const bench = parseFloat(document.getElementById('baseBenchmark').value) || 0;
            const stip = parseFloat(document.getElementById('stipendio').value) || 0;
            const bp = parseFloat(document.getElementById('buoniPasto').value) || 0;
            const oreSett = parseFloat(document.getElementById('oreInput').value) || 0;
            const sett = parseInt(document.getElementById('settimane').value);
            const speseM = parseFloat(document.getElementById('speseMese').value) || 0;
            const viaggMin = parseFloat(document.getElementById('viaggio').value) || 0;

            const bpTot = bp * (sett * 5);
            const speseTot = speseM * 10; // Esempio su 10 mesi
            const nettoF = (stip + bpTot) - speseTot;
            
            const oreLavA = oreSett * sett;
            const oreViaggA = (viaggMin * 5 * sett) / 60;
            const oreTot = oreLavA + oreViaggA;
            const pagaR = oreTot > 0 ? nettoF / oreTot : 0;

            // UI APP
            document.getElementById('valoreOrario').innerText = pagaR.toFixed(2) + ' ‚Ç¨';
            document.getElementById('redditoPulito').innerText = Math.round(nettoF).toLocaleString() + ' ‚Ç¨';
            document.getElementById('oreTotali').innerText = Math.round(oreTot) + ' h';
            document.getElementById('infoSett').innerText = oreSett.toFixed(2) + ' ORE/SETTIMANA';
            document.getElementById('bpDetail').innerText = `+${Math.round(bpTot)}‚Ç¨ BUONI PASTO`;

            // PDF DATA
            document.getElementById('pdf-netto').innerText = stip.toLocaleString() + ' ‚Ç¨';
            document.getElementById('pdf-bp').innerText = Math.round(bpTot) + ' ‚Ç¨';
            document.getElementById('pdf-spese').innerText = '-' + speseTot.toLocaleString() + ' ‚Ç¨';
            document.getElementById('pdf-bench').innerText = bench.toFixed(2) + ' ‚Ç¨/h';
            document.getElementById('pdf-carico').innerText = `${Math.round(oreLavA)} h lavorative + ${Math.round(oreViaggA)} h viaggio`;

            // DINAMICA COLORI (Solo in App)
            const card = document.getElementById('resultCard');
            const feed = document.getElementById('feedback');
            const label = document.getElementById('labelValore');

            if (pagaR >= bench) {
                card.className = "p-10 rounded-[3rem] shadow-2xl text-white text-center transition-all bg-emerald-500 pdf-main-card";
                feed.innerText = "‚≠ê UPGRADE VALORE";
                label.className = "text-[10px] font-bold uppercase tracking-widest mb-2 opacity-70 text-white";
            } else if (pagaR >= bench * 0.9) {
                card.className = "p-10 rounded-[3rem] shadow-2xl text-white text-center transition-all bg-amber-500 pdf-main-card";
                feed.innerText = "‚ö†Ô∏è VALORE IN CALO";
                label.className = "text-[10px] font-bold uppercase tracking-widest mb-2 opacity-70 text-white";
            } else {
                card.className = "p-10 rounded-[3rem] shadow-2xl text-white text-center transition-all bg-rose-500 pdf-main-card";
                feed.innerText = "‚ùå SVALUTAZIONE ORA";
                label.className = "text-[10px] font-bold uppercase tracking-widest mb-2 opacity-70 text-white";
            }
        }
        window.onload = calculate;
    </script>
</body>
</html>